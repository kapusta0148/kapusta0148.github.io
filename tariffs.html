<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ã–±–æ—Ä –¢–∞—Ä–∏—Ñ–∞</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <h1>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∞—Ä–∏—Ñ üí≥</h1>
        <form id="tariffForm">
            <div class="tariff-option">
                <input type="radio" id="tariff1" name="tariff" value="1_month" checked>
                <label for="tariff1"><strong>1 –ú–µ—Å—è—Ü</strong> - 100 —Ä—É–±.</label>
                <p class="tariff-description">–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∏ –æ—Ü–µ–Ω–∏—Ç—å –≤—Å–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞.</p>
            </div>
            <div class="tariff-option">
                <input type="radio" id="tariff3" name="tariff" value="3_months">
                <label for="tariff3"><strong>3 –ú–µ—Å—è—Ü–∞</strong> - 250 —Ä—É–±. (–≠–∫–æ–Ω–æ–º–∏—è 50 —Ä—É–±!)</label>
                <p class="tariff-description">–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.</p>
            </div>
            <div class="tariff-option">
                <input type="radio" id="tariff12" name="tariff" value="1_year">
                <label for="tariff12"><strong>1 –ì–æ–¥</strong> - 900 —Ä—É–±. (–õ—É—á—à–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ! –≠–∫–æ–Ω–æ–º–∏—è 300 —Ä—É–±!)</label>
                <p class="tariff-description">–ú–∞–∫—Å–∏–º—É–º –≤—ã–≥–æ–¥—ã –¥–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è.</p>
            </div>
            <button type="button" id="payButton" class="button">–û–ø–ª–∞—Ç–∏—Ç—å –∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø ‚ú®</button>
        </form>
        <p id="statusMessage" class="status-message"></p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram Web App API
            Telegram.WebApp.ready();

            const payButton = document.getElementById('payButton');
            const tariffForm = document.getElementById('tariffForm');
            const statusMessage = document.getElementById('statusMessage');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–û–ø–ª–∞—Ç–∏—Ç—å", —Ç–∞–∫ –∫–∞–∫ Web App –≥–æ—Ç–æ–≤
            Telegram.WebApp.MainButton.setText('–û–ø–ª–∞—Ç–∏—Ç—å –∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø');
            Telegram.WebApp.MainButton.show();
            Telegram.WebApp.MainButton.onClick(function() {
                handlePayment();
            });


            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–µ—Å–ª–∏ –≤–¥—Ä—É–≥ MainButton –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
            payButton.addEventListener('click', function () {
                handlePayment();
            });

            function handlePayment() {
                const selectedTariffInput = tariffForm.querySelector('input[name="tariff"]:checked');

                if (selectedTariffInput) {
                    const tariffValue = selectedTariffInput.value;
                    const dataToSend = JSON.stringify({
                        tariff_selected: tariffValue,
                        status: "Ok_payment_initiated", // –ë–æ–ª–µ–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
                        timestamp: new Date().toISOString()
                        // –°—é–¥–∞ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram.WebApp.initDataUnsafe.user.id
                        // user_id: Telegram.WebApp.initDataUnsafe.user ? Telegram.WebApp.initDataUnsafe.user.id : null
                    });

                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram –±–æ—Ç
                    Telegram.WebApp.sendData(dataToSend);

                    // –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç.–∫. sendData —á–∞—Å—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç WebApp)
                    // statusMessage.textContent = '–û—Ç–ª–∏—á–Ω–æ! –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –±–æ—Ç–∞. –°–µ–π—á–∞—Å –æ–∫–Ω–æ –∑–∞–∫—Ä–æ–µ—Ç—Å—è...';
                    // statusMessage.style.color = 'green';

                    // Telegram.WebApp.close(); // –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å Web App –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
                } else {
                    statusMessage.textContent = '‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ.';
                    statusMessage.style.color = 'red';
                    // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Telegram.WebApp.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ.');
                }
            }
        });
    </script>
</body>
</html>